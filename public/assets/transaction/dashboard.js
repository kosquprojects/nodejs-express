!function(t){var e={};function a(o){if(e[o])return e[o].exports;var l=e[o]={i:o,l:!1,exports:{}};return t[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}a.m=t,a.c=e,a.d=function(t,e,o){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)a.d(o,l,function(e){return t[e]}.bind(null,l));return o},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=7)}({7:function(t,e){!function(){class t{static displayDetailData(t){try{$.fn.dataTable.isDataTable("#detaildata")&&$("#detaildata").DataTable().destroy(),$("#detaildata").DataTable({lengthMenu:[[26,100,-1],[26,100,"All"]],pageLength:-1,data:t,scrollX:!0,aoColumns:[{data:"s_evim_id"},{data:"s_evim_tracking_id"},{data:"category"},{data:"subcat"},{data:"s_job_no"},{data:"billing_plant"},{data:"submission_plant"},{data:"s_evim_name"}],deferRender:!0,scrollY:1e3,scrollCollapse:!0,scroller:!0})}catch(t){console.log(t)}}static displayvendor(t,e){try{let a='<option value="">Select Vendor Code</option>';t.forEach(t=>{a+=`<option value="${t.s_email_id}">${t.n_vendor_code}-${t.s_vendor_name}</option>`}),$("#"+e).html(a)}catch(t){console.log(t)}}static display_dash_table(t){const e={April:1,May:2,June:3,July:4,August:5,September:6,October:7,November:8,December:9,January:10,February:11,March:12};t.sort((function(t,a){return e[t.Month]-e[a.Month]})),console.log("abd",t);try{let e="";0==t.length||null==t[0].Month?e+="<div><center><b>Data Not Available</b></center></div>":(e+='<table class="table table-bordered datatab" id="report_table" style="width:100%">',e+='<thead class="thead-light">',e+="<tr>",e+="<th>Month</th>",e+='<th style="color:blue">Invoice Uploaded</th>',e+='<th style="color:green">Accepted</th>',e+='<th td style="color:red">Rejected</th>',e+='<th style="color:orange">Invoice On Hold</th>',e+="<th>With Level 1</th>",e+="<th>With Level 2</th>",e+="<th>With Level 3</th>",e+="<th>Finance</th>",e+="</tr>",e+=" </thead>",e+=" <tbody>",t.forEach((t,a)=>{e+=`<tr sort-order="${a}"><td>${t.Month} Nos.</td><td style="color:blue;text-align:right;"><a style="cursor: pointer;color:blue;" onclick='getDetaildata("${t.Month}","al");' data-toggle="modal" data-target="#detailModal">${t.uploaded_invoice}</a></td><td style="color:green;text-align:right;"><a style="cursor: pointer;color:blue;" onclick='getDetaildata("${t.Month}","ac");' data-toggle="modal" data-target="#detailModal">${t.accepted_invoice}</a></td><td td style="color:red;text-align:right;"><a style="cursor: pointer;color:blue;" onclick='getDetaildata("${t.Month}","U4");' data-toggle="modal" data-target="#detailModal">${t.Rejected_invoice}</a></td><td style="color:orange;text-align:right;"><a style="cursor: pointer;color:blue;" onclick='getDetaildata("${t.Month}","C1");' data-toggle="modal" data-target="#detailModal">${t.onhold_invoice}</a></td><td style="text-align:right;"><a style="cursor: pointer;color:blue;" onclick='getDetaildata("${t.Month}","C2");' data-toggle="modal" data-target="#detailModal">${t.level_1}</a></td><td style="text-align:right;"><a style="cursor: pointer;color:blue;" onclick='getDetaildata("${t.Month}","A1");' data-toggle="modal" data-target="#detailModal">${t.level_2}</a></td><td style="text-align:right;"><a style="cursor: pointer;color:blue;" onclick='getDetaildata("${t.Month}","A2");' data-toggle="modal" data-target="#detailModal">${t.level_3}</a></td><td style="text-align:right;"><a style="cursor: pointer;color:blue;" onclick='getDetaildata("${t.Month}","A3");' data-toggle="modal" data-target="#detailModal">${t.level_4}</a></td></tr>`,e+=`<tr><td>${t.Month}  Values.</td><td style="color:blue;text-align:right;">${numberWithCommas(t.uploaded_invoice_amt.toFixed(2))}</td><td style="color:green;text-align:right;">${numberWithCommas(t.accepted_invoice_amt.toFixed(2))}</td><td style="color:red;text-align:right;">${numberWithCommas(t.Rejected_invoice_amt.toFixed(2))}</td><td style="color:orange;text-align:right;">${numberWithCommas(t.onhold_invoice_amt.toFixed(2))}</td><td style="text-align:right;">${numberWithCommas(t.level_1_amt.toFixed(2))}</td><td style="text-align:right;">${numberWithCommas(t.level_2_amt.toFixed(2))}</td><td style="text-align:right;">${numberWithCommas(t.level_3_amt.toFixed(2))}</td><td style="text-align:right;">${numberWithCommas(t.level_4_amt.toFixed(2))}</td></tr>`,e+='<tr><td colspan="9"></td></tr>'}),e+="</tbody>",e+=" </table>"),$("#report_tab").html(e)}catch(t){console.log(t)}}static displayPlant(t,e,a){try{let o='<option value="">Select Plant</option>';t.forEach(t=>{o+=`<option value="${t.s_plant_name}">${t.s_plant_name}</option>`}),$("#"+e).html(o),$("#"+a).html(o)}catch(t){console.log(t)}}static get_financial_year(){for(var t=(new Date).getFullYear(),e=0;e<30;e++){var a=t+"-"+(t+1).toString().slice(-2);$("#d_year").append(new Option(a,a)),t--}}static getMonthFromString(t){return new Date(Date.parse(t+" 1, 2012")).getMonth()+1}}class e{static getDetailData(e,a){try{if("ven"==localStorage.getItem("role"))var o=localStorage.getItem("email");else o=$("#n_vendor_code").val();var l={type:a,month:e,d_year:$("#d_year").val(),n_vendor_code:o,n_billing_plant:$("#n_billing_plant").val(),n_submission_plant:$("#n_submission_plant").val()};$.ajax({url:"./evim/getDetailData",type:"POST",crossDomain:!0,data:l,success:function(e){console.log(e),t.displayDetailData(e.data)},error:function(t){console.log(t)},complete:function(){}})}catch(t){console.log(t)}}static getvendorData(){$("#n_vendor_code").select2();try{$.ajax({url:"./evim/getvendorData",type:"POST",crossDomain:!0,success:function(e){e.data,t.displayvendor(e.data,"n_vendor_code")},error:function(t){console.log(t)},complete:function(){}})}catch(t){console.log(t)}}static getPlant(){try{$.ajax({url:"./evim/getPlant",type:"POST",crossDomain:!0,success:function(e){console.log(e),t.displayPlant(e.data,"n_billing_plant","n_submission_plant")},error:function(t){console.log(t)},complete:function(){}})}catch(t){console.log(t)}}static get_report(){try{if("ven"==localStorage.getItem("role"))var e=localStorage.getItem("email");else e=$("#n_vendor_code").val();var a=new Date($("#from_date").val()),o=new Date($("#to_date").val());if(a.valueOf()>o.valueOf())return void alert("To date must be greater then from date");null!=$("#from_date").val()&&""!=$("#from_date").val()&&null!=$("#to_date").val()&&""!=$("#to_date").val()?$("#note").text(`(Below Data are between ${$("#from_date").val()} and ${$("#to_date").val()})`):$("#note").text(`(Below Data based on ${$("#d_year").val()} fiscal year)`);var l={d_year:$("#d_year").val(),n_vendor_code:e,n_billing_plant:$("#n_billing_plant").val(),n_submission_plant:$("#n_submission_plant").val(),from_date:$("#from_date").val(),to_date:$("#to_date").val()};$.ajax({url:"./evim/get_report",type:"POST",crossDomain:!0,data:l,beforeSend:function(){$("#loader").addClass("is-active"),document.getElementById("loader").setAttribute("data-text","Loading...")},success:function(e){console.log(e),$("#dash_report").show(),t.display_dash_table(e.data)},error:function(t){console.log(t)},complete:function(){$("#loader").removeClass("is-active")}})}catch(t){console.log(t)}}static getuser(){try{$.ajax({url:"./evim/getuser",type:"POST",crossDomain:!0,data:void 0,beforeSend:function(){},success:function(t){console.log(t);var e=t.data[0],a=t.data[1],o=t.data[2];$("#usercount").html(e.cnt,e.user),$("#vendorcount").html(a.cnt,a.user),$("#completecount").html(o.cnt,o.user)},error:function(t){console.log(t)},complete:function(){(new Date).toLocaleString("default",{month:"long"})}})}catch(t){console.log(t)}}}document.addEventListener("DOMContentLoaded",e.getuser(),e.getvendorData(),e.getPlant(),t.get_financial_year(),e.get_report()),get_report=function(){e.get_report()},getDetaildata=function(t,a){e.getDetailData(t,a)}}()}});